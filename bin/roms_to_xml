#!/bin/bash

set -e

if [ "$1" = "" ] ; then
	echo "Must supply a directory name to generate xml from..."
	exit 1
fi

if [ "$2" = "" ] ; then
  echo "Must supply a rom type name..."
  exit 1
fi

rom_path=$1
rom_type=$2

pushd $rom_path
  echo "<$rom_type>"
	for file in * ; do
    echo "<game>"
    echo "<title>$(echo $file | sed 's/\.$rom_type//g')</title>"
    echo "<rom>$file</rom>"
    echo "</game>"
	done
  echo "</$rom_type>"
popd

